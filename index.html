<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>360&deg; Image Gallery</title>
    <meta name="description" content="JavaScript - A-Frame School">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <script src="https://aframe.io/releases/0.5.0/aframe.min.js"></script>
    <script src="https://npmcdn.com/aframe-animation-component@3.0.1"></script>
    <script src="https://unpkg.com/aframe-event-set-component@3.0.3/dist/aframe-event-set-component.min.js"></script>
    <script src="https://npmcdn.com/aframe-layout-component@3.0.1"></script>
    <script src="https://npmcdn.com/aframe-template-component@3.1.1"></script>
    <script src="https://matthrco.github.io/virtualreality/makery.js"></script>
    </head>
  <body>
    <a-scene makery>
      <a-assets>
        <video playsinline webkit-playsinline id="makery1" crossorigin="anonymous" muted loop src="https://matthrco.github.io/virtualreality/VP1Static.mp4">
        </video>
        <video playsinline webkit-playsinline id="makery2" crossorigin="anonymous" muted loop src="https://matthrco.github.io/virtualreality/VP2Static.mp4">
        </video>
        <video playsinline webkit-playsinline id="makery3" crossorigin="anonymous" muted loop src="https://matthrco.github.io/virtualreality/VP3Static.mp4">
        </video>
        <video playsinline webkit-playsinline id="makery1_dynamic" crossorigin="anonymous" muted loop src="https://matthrco.github.io/virtualreality/VP1Dynamic.mp4">
        </video>
        <video playsinline webkit-playsinline id="makery2_all" crossorigin="anonymous" muted loop src="https://matthrco.github.io/virtualreality/VP2AllRobots.mp4">
        </video>
        <video playsinline webkit-playsinline id="makery2_arm" crossorigin="anonymous" muted loop src="https://matthrco.github.io/virtualreality/VP2Arm.mp4">
        </video>
        <video playsinline webkit-playsinline id="makery2_car" crossorigin="anonymous" muted loop src="https://matthrco.github.io/virtualreality/VP2Car.mp4">
        </video>
        <video playsinline webkit-playsinline id="makery2_dog" crossorigin="anonymous" muted loop src="https://matthrco.github.io/virtualreality/VP2Dog.mp4">
        </video>
        <video playsinline webkit-playsinline id="scratch" crossorigin="anonymous" muted loop src="https://matthrco.github.io/virtualreality/Scratch.mp4">
        </video>
        <img id="gradient" src="https://cdn.glitch.com/22121a03-bf71-4c6f-a5c5-9ec643d973cd%2Fcamera.png?1510842315098">
      </a-assets>
      <a-videosphere id="vid" src="#makery1" rotation="0 180 0"></a-videosphere> 
      <a-entity id="link1" class="link" portal="target: #vid; src: #makery1; position: 0 0 0; rotation: 0 90 0"></a-entity>
      <a-entity id="link2" class="link" portal="target: #vid; src: #makery2; position: -5 0 2.5; rotation: 0 320 0"></a-entity>
      <a-entity id="link3" class="link" portal="target: #vid; src: #makery3; position: -4.5 0 -2; rotation: 0 210 0"></a-entity>
      
<!--       When hover over text box appears -->
      
<!--   VR RIG     -->
      <a-cylinder id="pos1" position="1.4 -0.76 -6.65" opacity="0.0" scale="1 1 3.1" class="link"
                  event-set__enter="_event: mouseenter; _target: #VRText; visible: true"
                  event-set__leave="_event: mouseleave; _target: #VRText; visible: false">
        <a-box id="VRText" opacity="0.5" width="5" height="1" color="blue" depth="0.001" position="1.7 0.9 -0.6"
               rotation="0 -30 0" visible="false" text="align:center;color:black;value:HTC Vive Virtual Reality Rig"></a-box>
      </a-cylinder>
<!--    Scratch    -->
      <a-box id="pos2" position="-4.1 -1.2 1" opacity="0.0" scale="1 1 0.5" class="link" 
                  event-set__enter="_event: mouseenter; _target: #scratchText; visible: true"
                  event-set__enters="_event: mouseenter; _target: #video1; visible: true"
                  event-set__leave="_event: mouseleave; _target: #scratchText; visible: false"
                  event-set__leaves="_event: mouseleave; _target: #video1;  visible: false">
       <a-box id="scratchText" opacity="0.5" width="3" height="0.5" color="blue" depth="0.001" 
              position="0 1.9 -1" rotation="0 180 0" visible="false" text="align:center;color:black;value:Program with Scratch"></a-box>
        <a-video id="video1" visible="false" src="#scratch" width="16" height="9" rotation="0 180 0" position="-0.2 1 -3.8" scale="0.08 0.08 0.08"></a-video>
      </a-box>
      
<!--    Python game    -->
      <a-box id="pos3" position="-6.4 -1.2 1" opacity="0.0" scale="1 1 0.5" class="link"
                  event-set__enter="_event: mouseenter; _target: #pythonText; visible: true"
                  event-set__enters="_event: mouseenter; _target: #video2; visible: true"
                  event-set__leave="_event: mouseleave; _target: #pythonText; visible: false"
                  event-set__leaves="_event: mouseleave; _target: #video2; visible: false">
       <a-box id="pythonText" opacity="0.5" width="3" height="0.5" color="blue" depth="0.001" 
              position="0 1 0" rotation="0 180" visible="false" text="align:center;color:black;value:Learn Python"></a-box>
        <a-video id="video2" visible="false" src="#makery1_dynamic" width="16" height="9" position="0 0 -2" scale="0.08 0.08 0.08"></a-video>
      </a-box>
      <!-- Camera + cursor. -->
      <a-entity id="camera" class="camera" rotation="0 90 0">
        <a-entity camera="active:true" look-controls="" position="0 0 0" rotation="0 0 0" scale="1 1 1" visible="true">
        <a-cursor
          animation__click="property: scale; startEvents: click; from: 0.1 0.1 0.1; to: 1 1 1; dur: 150"
          animation__fusing="property: fusing; startEvents: fusing; from: 1 1 1; to: 0.1 0.1 0.1; dur: 1500"
          event-set__1="_event: mouseenter; color: springgreen"
          event-set__2="_event: mouseleave; color: black"
          fuse="true; timeout: 50000"
          raycaster="objects: .link"></a-cursor>
      </a-entity>
      </a-entity>
      <a-light id="light" type="ambient" color="#FFF"></a-light>
    </a-scene>
    <div id="p1" class="rs-base" style="height: 95%; width: 97%;">
      <div class="rs-container" style="height: auto;">
        <h1>*Insert Tutorial Here*
        </h1>
        <button onclick="eventLstner();">
          Click
        </button>
      </div>
    </div>
    <script>
    var eventLstner = function (event) {
      var v = document.querySelector('#makery1');// + document.querySelector('#vid').getAttribute('material').src.id);
      v.play();
      var child = document.getElementById("p1");
      if(child !== null){
        child.parentNode.removeChild(child);        
      }
    };
    window.addEventListener('click', eventLstner);
    </script>
  </body>
</html>
